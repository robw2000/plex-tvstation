<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>TV Shows</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<header>
		<h1>Plex TV Station</h1>
		<nav><ul><li><a href="index.html">Home</a></li><li><a href="movies.html">Movies</a></li><li><a href="tv.html" class="active">TV Shows</a></li><li><a href="missing-episodes.html">Missing Episodes</a></li></ul></nav>
	</header>
	<main>
		<h1>Plex Library Report</h1>
<p></p>
<p>Generated on: 2026-01-23 17:45:16</p>
<p></p>
<h2>TV Shows</h2>
<p></p>
<ul>
<li><strong>Total Shows:</strong> 69</li>
<li><strong>Total Episodes:</strong> 2028</li>
<li><strong>Watched Episodes:</strong> 623 (30.7%)</li>
<li><strong>Unwatched Episodes:</strong> 1405 (69.3%)</li>
</ul>
<p></p>
<h3>TV Show Details</h3>
<p></p>
<div class="filter-container">
		<input type="text" id="search-input" placeholder="Search..." autocomplete="off">
		<select id="genre-filter">
			<option value="">Filter Genre</option>
		</select>
	</div>
		<div class="table-container">
<table class="sortable-table">
<thead>
<tr>
<th class="sortable-header" data-column="0">Title <span class="sort-indicator"></span></th>
<th class="sortable-header" data-column="1">Episodes <span class="sort-indicator"></span></th>
<th class="sortable-header" data-column="2">Watched <span class="sort-indicator"></span></th>
<th class="sortable-header" data-column="3">% Watched <span class="sort-indicator"></span></th>
<th class="sortable-header" data-column="4">Total Size <span class="sort-indicator"></span></th>
<th class="sortable-header" data-column="5">Avg Episode Size <span class="sort-indicator"></span></th>
<th class="sortable-header" data-column="6">Genres <span class="sort-indicator"></span></th>
</tr>
</thead>
<tbody>
<tr>
<td>30 Rock</td>
<td>21</td>
<td>21</td>
<td>100.0%</td>
<td>16.59 GB</td>
<td>808.84 MB</td>
<td>comedy</td>
</tr>
<tr>
<td>American Gods</td>
<td>26</td>
<td>6</td>
<td>23.1%</td>
<td>53.08 GB</td>
<td>2.04 GB</td>
<td>sci-fi, fantasy, drama, mystery</td>
</tr>
<tr>
<td>Archer (2009)</td>
<td>49</td>
<td>2</td>
<td>4.1%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>comedy, animation, adventure, action, fantasy</td>
</tr>
<tr>
<td>Arrested Development</td>
<td>19</td>
<td>10</td>
<td>52.6%</td>
<td>15.61 GB</td>
<td>841.27 MB</td>
<td>comedy</td>
</tr>
<tr>
<td>Avenue 5</td>
<td>9</td>
<td>9</td>
<td>100.0%</td>
<td>11.02 GB</td>
<td>1.22 GB</td>
<td>sci-fi, comedy, fantasy</td>
</tr>
<tr>
<td>Battlestar Galactica (2003)</td>
<td>14</td>
<td>3</td>
<td>21.4%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>sci-fi, adventure, drama, action, fantasy</td>
</tr>
<tr>
<td>Being Human (US)</td>
<td>13</td>
<td>0</td>
<td>0.0%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>sci-fi, horror, fantasy, drama</td>
</tr>
<tr>
<td>Better Off Ted</td>
<td>25</td>
<td>9</td>
<td>36.0%</td>
<td>25.79 GB</td>
<td>1.03 GB</td>
<td>sci-fi, comedy</td>
</tr>
<tr>
<td>Bob&#39;s Burgers</td>
<td>178</td>
<td>126</td>
<td>70.8%</td>
<td>143.45 GB</td>
<td>825.23 MB</td>
<td>animation, comedy</td>
</tr>
<tr>
<td>Buffy the Vampire Slayer</td>
<td>10</td>
<td>10</td>
<td>100.0%</td>
<td>17.24 GB</td>
<td>1.72 GB</td>
<td>comedy, sci-fi, horror, adventure, drama, action, romance, fantasy</td>
</tr>
<tr>
<td>Cobra Kai</td>
<td>10</td>
<td>0</td>
<td>0.0%</td>
<td>10.95 GB</td>
<td>1.10 GB</td>
<td>comedy, martial arts, sport, drama, action</td>
</tr>
<tr>
<td>Community</td>
<td>109</td>
<td>34</td>
<td>31.2%</td>
<td>93.95 GB</td>
<td>882.64 MB</td>
<td>comedy</td>
</tr>
<tr>
<td>Cowboy Bebop</td>
<td>26</td>
<td>26</td>
<td>100.0%</td>
<td>26.27 GB</td>
<td>1.01 GB</td>
<td>comedy, sci-fi, animation, western, adventure, drama, action, anime, fantasy</td>
</tr>
<tr>
<td>Defiance</td>
<td>12</td>
<td>0</td>
<td>0.0%</td>
<td>20.10 GB</td>
<td>1.67 GB</td>
<td>action, sci-fi, fantasy, drama</td>
</tr>
<tr>
<td>Fallout</td>
<td>8</td>
<td>0</td>
<td>0.0%</td>
<td>19.96 GB</td>
<td>2.49 GB</td>
<td>sci-fi, war, adventure, drama, action, fantasy</td>
</tr>
<tr>
<td>Farscape</td>
<td>43</td>
<td>15</td>
<td>34.9%</td>
<td>71.10 GB</td>
<td>1.65 GB</td>
<td>sci-fi, adventure, drama, action, fantasy</td>
</tr>
<tr>
<td>Firefly</td>
<td>14</td>
<td>0</td>
<td>0.0%</td>
<td>24.89 GB</td>
<td>1.78 GB</td>
<td>sci-fi, adventure, fantasy, drama</td>
</tr>
<tr>
<td>Flight of the Conchords</td>
<td>22</td>
<td>10</td>
<td>45.5%</td>
<td>23.53 GB</td>
<td>1.07 GB</td>
<td>music, comedy, musical</td>
</tr>
<tr>
<td>Fresh Off the Boat</td>
<td>71</td>
<td>15</td>
<td>21.1%</td>
<td>66.29 GB</td>
<td>956.02 MB</td>
<td>comedy, family</td>
</tr>
<tr>
<td>Futurama</td>
<td>43</td>
<td>12</td>
<td>27.9%</td>
<td>44.98 GB</td>
<td>1.05 GB</td>
<td>comedy, sci-fi, animation, adventure, fantasy</td>
</tr>
<tr>
<td>Ghosts (US)</td>
<td>18</td>
<td>13</td>
<td>72.2%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>comedy, fantasy</td>
</tr>
<tr>
<td>Good Omens</td>
<td>6</td>
<td>6</td>
<td>100.0%</td>
<td>11.71 GB</td>
<td>1.95 GB</td>
<td>sci-fi, comedy, fantasy, drama</td>
</tr>
<tr>
<td>Highlander: The Series</td>
<td>22</td>
<td>1</td>
<td>4.5%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>sci-fi, mystery, adventure, drama, action, romance, fantasy</td>
</tr>
<tr>
<td>It&#39;s Always Sunny in Philadelphia</td>
<td>14</td>
<td>13</td>
<td>92.9%</td>
<td>20.29 GB</td>
<td>1.45 GB</td>
<td>comedy</td>
</tr>
<tr>
<td>Killing Eve</td>
<td>8</td>
<td>0</td>
<td>0.0%</td>
<td>13.80 GB</td>
<td>1.72 GB</td>
<td>thriller, adventure, drama, action, crime</td>
</tr>
<tr>
<td>Kim&#39;s Convenience</td>
<td>39</td>
<td>19</td>
<td>48.7%</td>
<td>33.54 GB</td>
<td>880.75 MB</td>
<td>comedy</td>
</tr>
<tr>
<td>Kroll Show</td>
<td>29</td>
<td>25</td>
<td>86.2%</td>
<td>28.34 GB</td>
<td>1000.72 MB</td>
<td>comedy</td>
</tr>
<tr>
<td>Legion</td>
<td>8</td>
<td>0</td>
<td>0.0%</td>
<td>16.57 GB</td>
<td>2.07 GB</td>
<td>thriller, sci-fi, drama, action, fantasy</td>
</tr>
<tr>
<td>Lost Girl</td>
<td>13</td>
<td>13</td>
<td>100.0%</td>
<td>31.28 GB</td>
<td>2.41 GB</td>
<td>sci-fi, horror, mystery, drama, action, romance, fantasy, crime</td>
</tr>
<tr>
<td>MADtv</td>
<td>22</td>
<td>0</td>
<td>0.0%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>reality, talk show, comedy</td>
</tr>
<tr>
<td>Marvel&#39;s Jessica Jones</td>
<td>11</td>
<td>1</td>
<td>9.1%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>thriller, sci-fi, drama, action, fantasy, crime</td>
</tr>
<tr>
<td>Masters of Sex</td>
<td>12</td>
<td>0</td>
<td>0.0%</td>
<td>14.38 GB</td>
<td>1.20 GB</td>
<td>romance, drama</td>
</tr>
<tr>
<td>Modern Family</td>
<td>120</td>
<td>11</td>
<td>9.2%</td>
<td>74.94 GB</td>
<td>639.48 MB</td>
<td>romance, comedy, drama</td>
</tr>
<tr>
<td>My Name Is Earl</td>
<td>47</td>
<td>0</td>
<td>0.0%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>comedy</td>
</tr>
<tr>
<td>Obi-Wan Kenobi</td>
<td>6</td>
<td>0</td>
<td>0.0%</td>
<td>68.60 GB</td>
<td>11.43 GB</td>
<td>mini-series, sci-fi, adventure, drama, action, fantasy</td>
</tr>
<tr>
<td>Orphan Black</td>
<td>20</td>
<td>1</td>
<td>5.0%</td>
<td>31.70 GB</td>
<td>1.59 GB</td>
<td>sci-fi, thriller, fantasy, drama</td>
</tr>
<tr>
<td>Parks and Recreation</td>
<td>60</td>
<td>14</td>
<td>23.3%</td>
<td>48.95 GB</td>
<td>835.42 MB</td>
<td>comedy</td>
</tr>
<tr>
<td>Peacemaker</td>
<td>8</td>
<td>0</td>
<td>0.0%</td>
<td>12.14 GB</td>
<td>1.52 GB</td>
<td>comedy, sci-fi, adventure, drama, action, fantasy, crime</td>
</tr>
<tr>
<td>Person of Interest</td>
<td>45</td>
<td>7</td>
<td>15.6%</td>
<td>74.63 GB</td>
<td>1.66 GB</td>
<td>thriller, sci-fi, mystery, suspense, drama, action, fantasy, crime</td>
</tr>
<tr>
<td>Raising Hope</td>
<td>73</td>
<td>42</td>
<td>57.5%</td>
<td>30.34 GB</td>
<td>425.57 MB</td>
<td>comedy, family</td>
</tr>
<tr>
<td>Reno 911!</td>
<td>13</td>
<td>13</td>
<td>100.0%</td>
<td>11.81 GB</td>
<td>930.17 MB</td>
<td>comedy, crime</td>
</tr>
<tr>
<td>Resident Alien</td>
<td>29</td>
<td>2</td>
<td>6.9%</td>
<td>50.92 GB</td>
<td>1.76 GB</td>
<td>comedy, sci-fi, mystery, drama, fantasy</td>
</tr>
<tr>
<td>Rick and Morty</td>
<td>41</td>
<td>0</td>
<td>0.0%</td>
<td>35.07 GB</td>
<td>875.95 MB</td>
<td>comedy, sci-fi, animation, adventure, fantasy</td>
</tr>
<tr>
<td>Schitt&#39;s Creek</td>
<td>80</td>
<td>0</td>
<td>0.0%</td>
<td>72.28 GB</td>
<td>925.15 MB</td>
<td>comedy</td>
</tr>
<tr>
<td>Scrubs</td>
<td>24</td>
<td>2</td>
<td>8.3%</td>
<td>19.14 GB</td>
<td>816.55 MB</td>
<td>comedy, drama</td>
</tr>
<tr>
<td>Severance</td>
<td>9</td>
<td>9</td>
<td>100.0%</td>
<td>17.13 GB</td>
<td>1.90 GB</td>
<td>thriller, sci-fi, mystery, drama, fantasy</td>
</tr>
<tr>
<td>Star Trek: Discovery</td>
<td>65</td>
<td>0</td>
<td>0.0%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>sci-fi, adventure, drama, action, fantasy</td>
</tr>
<tr>
<td>Star Trek: Strange New Worlds</td>
<td>20</td>
<td>20</td>
<td>100.0%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>sci-fi, adventure, drama, action, fantasy</td>
</tr>
<tr>
<td>Stargate SG-1</td>
<td>22</td>
<td>2</td>
<td>9.1%</td>
<td>33.01 GB</td>
<td>1.50 GB</td>
<td>sci-fi, adventure, drama, action, fantasy</td>
</tr>
<tr>
<td>Station Eleven</td>
<td>10</td>
<td>0</td>
<td>0.0%</td>
<td>22.02 GB</td>
<td>2.20 GB</td>
<td>thriller, mini-series, sci-fi, mystery, adventure, drama, fantasy</td>
</tr>
<tr>
<td>Terminator: The Sarah Connor Chronicles</td>
<td>8</td>
<td>0</td>
<td>0.0%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>thriller, sci-fi, drama, action, fantasy</td>
</tr>
<tr>
<td>The 100</td>
<td>29</td>
<td>13</td>
<td>44.8%</td>
<td>40.14 GB</td>
<td>1.38 GB</td>
<td>thriller, sci-fi, mystery, suspense, drama, action, fantasy, crime</td>
</tr>
<tr>
<td>The Expanse</td>
<td>9</td>
<td>0</td>
<td>0.0%</td>
<td>20.38 GB</td>
<td>2.26 GB</td>
<td>thriller, sci-fi, mystery, suspense, drama, fantasy</td>
</tr>
<tr>
<td>The Good Place</td>
<td>49</td>
<td>0</td>
<td>0.0%</td>
<td>58.18 GB</td>
<td>1.19 GB</td>
<td>comedy, sci-fi, mystery, drama, romance, fantasy</td>
</tr>
<tr>
<td>The IT Crowd</td>
<td>25</td>
<td>6</td>
<td>24.0%</td>
<td>22.30 GB</td>
<td>913.21 MB</td>
<td>comedy</td>
</tr>
<tr>
<td>The L Word</td>
<td>26</td>
<td>0</td>
<td>0.0%</td>
<td>44.17 GB</td>
<td>1.70 GB</td>
<td>romance, drama, soap</td>
</tr>
<tr>
<td>The L Word: Generation Q</td>
<td>28</td>
<td>10</td>
<td>35.7%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>drama</td>
</tr>
<tr>
<td>The Mandalorian</td>
<td>16</td>
<td>10</td>
<td>62.5%</td>
<td>152.91 GB</td>
<td>9.56 GB</td>
<td>sci-fi, adventure, drama, action, fantasy</td>
</tr>
<tr>
<td>The Orville</td>
<td>26</td>
<td>12</td>
<td>46.2%</td>
<td>51.83 GB</td>
<td>1.99 GB</td>
<td>comedy, sci-fi, adventure, drama, fantasy</td>
</tr>
<tr>
<td>The Strain</td>
<td>13</td>
<td>0</td>
<td>0.0%</td>
<td>24.77 GB</td>
<td>1.91 GB</td>
<td>thriller, sci-fi, horror, mystery, drama, fantasy</td>
</tr>
<tr>
<td>The Tick (1994)</td>
<td>20</td>
<td>0</td>
<td>0.0%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>comedy, sci-fi, animation, family, adventure, action, children, fantasy</td>
</tr>
<tr>
<td>The Umbrella Academy</td>
<td>20</td>
<td>0</td>
<td>0.0%</td>
<td>37.82 GB</td>
<td>1.89 GB</td>
<td>comedy, sci-fi, adventure, suspense, drama, action, fantasy</td>
</tr>
<tr>
<td>Unbreakable Kimmy Schmidt</td>
<td>13</td>
<td>11</td>
<td>84.6%</td>
<td>11.03 GB</td>
<td>868.49 MB</td>
<td>comedy</td>
</tr>
<tr>
<td>Warehouse 13</td>
<td>25</td>
<td>3</td>
<td>12.0%</td>
<td>39.77 GB</td>
<td>1.59 GB</td>
<td>thriller, comedy, sci-fi, mystery, adventure, suspense, drama, fantasy</td>
</tr>
<tr>
<td>Wednesday</td>
<td>8</td>
<td>0</td>
<td>0.0%</td>
<td>13.70 GB</td>
<td>1.71 GB</td>
<td>comedy, sci-fi, horror, mystery, drama, fantasy, crime</td>
</tr>
<tr>
<td>Westworld</td>
<td>17</td>
<td>2</td>
<td>11.8%</td>
<td>29.70 GB</td>
<td>1.75 GB</td>
<td>sci-fi, mystery, western, adventure, drama, fantasy</td>
</tr>
<tr>
<td>What We Do in the Shadows</td>
<td>20</td>
<td>8</td>
<td>40.0%</td>
<td>22.18 GB</td>
<td>1.11 GB</td>
<td>sci-fi, horror, comedy, fantasy</td>
</tr>
<tr>
<td>White Collar</td>
<td>45</td>
<td>11</td>
<td>24.4%</td>
<td>77.47 GB</td>
<td>1.72 GB</td>
<td>crime, comedy, drama, mystery</td>
</tr>
<tr>
<td>Æon Flux</td>
<td>15</td>
<td>15</td>
<td>100.0%</td>
<td>0.00 B</td>
<td>0.00 B</td>
<td>thriller, sci-fi, animation, adventure, action, fantasy</td>
</tr>
</tbody>
</table>
</div>
<p></p>
<p></p>
<h3>Top 10 TV Shows by Average Episode Size</h3>
<p></p>
<div class="table-container">
<table class="sortable-table">
<thead>
<tr>
<th class="sortable-header" data-column="0">Title <span class="sort-indicator"></span></th>
<th class="sortable-header" data-column="1">Episodes <span class="sort-indicator"></span></th>
<th class="sortable-header" data-column="2">Average Episode Size <span class="sort-indicator"></span></th>
</tr>
</thead>
<tbody>
<tr>
<td>Obi-Wan Kenobi</td>
<td>6</td>
<td>11.43 GB</td>
</tr>
<tr>
<td>The Mandalorian</td>
<td>16</td>
<td>9.56 GB</td>
</tr>
<tr>
<td>Fallout</td>
<td>8</td>
<td>2.49 GB</td>
</tr>
<tr>
<td>Lost Girl</td>
<td>13</td>
<td>2.41 GB</td>
</tr>
<tr>
<td>The Expanse</td>
<td>9</td>
<td>2.26 GB</td>
</tr>
<tr>
<td>Station Eleven</td>
<td>10</td>
<td>2.20 GB</td>
</tr>
<tr>
<td>Legion</td>
<td>8</td>
<td>2.07 GB</td>
</tr>
<tr>
<td>American Gods</td>
<td>26</td>
<td>2.04 GB</td>
</tr>
<tr>
<td>The Orville</td>
<td>26</td>
<td>1.99 GB</td>
</tr>
<tr>
<td>Good Omens</td>
<td>6</td>
<td>1.95 GB</td>
</tr>
</tbody>
</table>
</div>
<p></p>
	</main>
	<footer>
		<p>Generated automatically from Plex library data</p>
	</footer>
	<script>
(function() {
	const table = document.querySelector('.sortable-table');
	if (!table) return;
	
	const tbody = table.querySelector('tbody');
	const headers = Array.from(table.querySelectorAll('.sortable-header'));
	let currentSort = { column: 0, direction: 'asc' };
	
	// Function to get current rows from DOM
	function getRows() {
		return Array.from(tbody.querySelectorAll('tr'));
	}
	
	// Remove "a" or "the" from beginning of title for sorting
	function getSortKey(text) {
		if (!text) return '';
		const lower = text.toLowerCase().trim();
		if (lower.startsWith('the ')) {
			return lower.substring(4);
		} else if (lower.startsWith('a ')) {
			return lower.substring(2);
		}
		return lower;
	}
	
	// Parse value for sorting
	function parseValue(cellText, columnIndex) {
		const text = cellText.trim();
		
		// For title column, use sort key
		if (columnIndex === 0) {
			return getSortKey(text);
		}
		
		// For size columns (GB, TB, MB, etc.) - check BEFORE numeric to avoid false matches
		const sizeMatch = text.match(/([\d.]+)\s*(TB|GB|MB|KB|B)/i);
		if (sizeMatch) {
			const value = parseFloat(sizeMatch[1]);
			const unit = sizeMatch[2].toUpperCase();
			const multipliers = { 'B': 1, 'KB': 1024, 'MB': 1024*1024, 'GB': 1024*1024*1024, 'TB': 1024*1024*1024*1024 };
			return value * (multipliers[unit] || 1);
		}
		
		// For percentage columns
		const pctMatch = text.match(/([\d.]+)%/);
		if (pctMatch) {
			return parseFloat(pctMatch[1]);
		}
		
		// For numeric columns (Year, Episodes, etc.) - check AFTER size to avoid false matches
		const numMatch = text.match(/^\d+/);
		if (numMatch) {
			return parseFloat(numMatch[0]);
		}
		
		// For Yes/No columns
		if (text.toLowerCase() === 'yes') return 1;
		if (text.toLowerCase() === 'no') return 0;
		
		// Default: string comparison
		return text.toLowerCase();
	}
	
	// Sort rows
	function sortTable(columnIndex, direction) {
		const currentRows = getRows();
		const sortedRows = currentRows.slice().sort((a, b) => {
			const aCells = a.querySelectorAll('td');
			const bCells = b.querySelectorAll('td');
			
			if (columnIndex >= aCells.length || columnIndex >= bCells.length) {
				return 0;
			}
			
			const aVal = parseValue(aCells[columnIndex].textContent, columnIndex);
			const bVal = parseValue(bCells[columnIndex].textContent, columnIndex);
			
			let comparison = 0;
			if (typeof aVal === 'number' && typeof bVal === 'number') {
				comparison = aVal - bVal;
			} else {
				comparison = String(aVal).localeCompare(String(bVal));
			}
			
			return direction === 'asc' ? comparison : -comparison;
		});
		
		// Clear tbody and add sorted rows
		tbody.innerHTML = '';
		sortedRows.forEach(row => tbody.appendChild(row));
		
		// Update sort indicators
		headers.forEach((header, idx) => {
			const indicator = header.querySelector('.sort-indicator');
			if (idx === columnIndex) {
				indicator.textContent = direction === 'asc' ? ' ▲' : ' ▼';
				header.classList.add('sorted');
			} else {
				indicator.textContent = '';
				header.classList.remove('sorted');
			}
		});
		
		currentSort = { column: columnIndex, direction: direction };
	}
	
	// Add click handlers to headers
	headers.forEach((header, index) => {
		header.style.cursor = 'pointer';
		header.addEventListener('click', () => {
			const newDirection = (currentSort.column === index && currentSort.direction === 'asc') ? 'desc' : 'asc';
			sortTable(index, newDirection);
		});
	});
	
	// Initial sort by title (column 0)
	sortTable(0, 'asc');
	
	// Extract genres and populate dropdown
	const genreFilter = document.getElementById('genre-filter');
	const allRows = getRows();
	const genresSet = new Set();
	
	// Find the genres column by looking for "Genres" in header text
	const headerCells = headers.length > 0 ? headers[0].parentElement.querySelectorAll('th') : [];
	let genresColumnIndex = -1;
	for (let i = 0; i < headerCells.length; i++) {
		if (headerCells[i].textContent.toLowerCase().includes('genre')) {
			genresColumnIndex = i;
			break;
		}
	}
	// Fallback to last column if not found
	if (genresColumnIndex === -1) {
		genresColumnIndex = headerCells.length - 1;
	}
	
	allRows.forEach(row => {
		if (row.parentElement === tbody) {
			const cells = row.querySelectorAll('td');
			if (cells[genresColumnIndex]) {
				const genresText = cells[genresColumnIndex].textContent;
				// Split by comma and add each genre
				genresText.split(',').forEach(genre => {
					const trimmed = genre.trim();
					if (trimmed) {
						genresSet.add(trimmed);
					}
				});
			}
		}
	});
	
	// Sort genres and add to dropdown
	const sortedGenres = Array.from(genresSet).sort();
	sortedGenres.forEach(genre => {
		const option = document.createElement('option');
		option.value = genre;
		option.textContent = genre;
		genreFilter.appendChild(option);
	});
	
	// Combined filter function
	function applyFilters() {
		const searchQuery = searchInput ? searchInput.value.trim().toLowerCase() : '';
		const selectedGenre = genreFilter ? genreFilter.value : '';
		
		const currentRows = getRows();
		currentRows.forEach(row => {
			if (row.parentElement === tbody) {
				const cells = row.querySelectorAll('td');
				let showRow = true;
				
				// Apply search filter (title and year only)
				if (searchQuery.length >= 2) {
					const searchText = (cells[0] ? cells[0].textContent.toLowerCase() : '') + ' ' + (cells[1] ? cells[1].textContent.toLowerCase() : '');
					if (!searchText.includes(searchQuery)) {
						showRow = false;
					}
				}
				
				// Apply genre filter
				if (selectedGenre && showRow) {
					const genresText = cells[genresColumnIndex] ? cells[genresColumnIndex].textContent : '';
					const genres = genresText.split(',').map(g => g.trim());
					if (!genres.includes(selectedGenre)) {
						showRow = false;
					}
				}
				
				row.style.display = showRow ? '' : 'none';
			}
		});
	}
	
	// Search functionality
	const searchInput = document.getElementById('search-input');
	if (searchInput) {
		let searchTimeout;
		searchInput.addEventListener('input', (e) => {
			clearTimeout(searchTimeout);
			searchTimeout = setTimeout(() => {
				applyFilters();
			}, 100);
		});
	}
	
	// Genre filter functionality
	if (genreFilter) {
		genreFilter.addEventListener('change', () => {
			applyFilters();
		});
	}
})();
</script>
</body>
</html>